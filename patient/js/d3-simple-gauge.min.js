!function(e,t){if("function"==typeof define&&define.amd)define(["exports","d3-shape","d3-ease","d3-array","d3-scale","d3-selection","d3-transition"],t);else if("undefined"!=typeof exports)t(exports,require("d3-shape"),require("d3-ease"),require("d3-array"),require("d3-scale"),require("d3-selection"),require("d3-transition"));else{var i={};t(i,e.d3,e.d3,e.d3,e.d3,e.d3,e.d3),e.d3SimpleGauge=i}}(this,function(e,c,t,i,n,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleGauge=void 0;var s=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),u={BAR_WIDTH:40,CHAR_INSET:10,EASE_TYPE:t.easeElastic,NEEDLE_ANIMATION_DELAY:0,NEEDLE_ANIMATION_DURATION:3e3,NEEDLE_RADIUS:15,PAD_RAD:.05},d=function(e){return 360*e*Math.PI/180},_=function(){function t(e){a(this,t),this._animationDelay=e.animationDelay,this._animationDuration=e.animationDuration,this._color=e.color,this._easeType=e.easeType,this._el=e.el,this._length=e.length,this._percent=e.percent,this._radius=e.radius,this._initialize()}return s(t,[{key:"update",value:function(e){var a=this;this._el.transition().delay(this._animationDelay).ease(this._easeType).duration(this._animationDuration).selectAll(".needle").tween("progress",function(){var t=this,i=e-a._percent,n=a._percent;return function(e){return a._percent=n+e*i,(0,r.select)(t).attr("d",a._getPath(a._percent))}})}},{key:"_initialize",value:function(){this._el.append("circle").attr("class","needle-center").attr("cx",0).attr("cy",0).attr("r",this._radius),this._el.append("path").attr("class","needle").attr("d",this._getPath(this._percent)),this._color&&(this._el.select(".needle-center").style("fill",this._color),this._el.select(".needle").style("fill",this._color))}},{key:"_getPath",value:function(e){var t=Math.PI/2,i=d(e/2),n=0-this._length*Math.cos(i),a=0-this._length*Math.sin(i);return"M "+(0-this._radius*Math.cos(i-t))+" "+(0-this._radius*Math.sin(i-t))+" L "+n+" "+a+" L "+(0-this._radius*Math.cos(i+t))+" "+(0-this._radius*Math.sin(i+t))}}]),t}();e.SimpleGauge=function(){function t(e){if(a(this,t),!e.el)throw new Error("The element must be valid.");if(isNaN(e.height)||e.height<=0)throw new RangeError("The height must be a positive number.");if(isNaN(e.sectionsCount)||e.sectionsCount<=0)throw new RangeError("The sections count must be a positive number.");if(isNaN(e.width)||e.width<=0)throw new RangeError("The width must be a positive number.");if(void 0!==e.animationDelay&&(isNaN(e.animationDelay)||e.animationDelay<0))throw new RangeError("The transition delay must be greater or equal to 0.");if(void 0!==e.animationDuration&&(isNaN(e.animationDuration)||e.animationDuration<0))throw new RangeError("The transition duration must be greater or equal to 0.");if(void 0!==e.barWidth&&(isNaN(e.barWidth)||e.barWidth<=0))throw new RangeError("The bar width must be a positive number.");if(void 0!==e.chartInset&&(isNaN(e.chartInset)||e.chartInset<0))throw new RangeError("The chart inset must be greater or equal to 0.");if(void 0!==e.needleRadius&&(isNaN(e.needleRadius)||e.needleRadius<0))throw new RangeError("The needle radius must be greater or equal to 0.");if(void 0!==e.sectionsColors&&e.sectionsColors.length!==e.sectionsCount)throw new RangeError("The sectionsColors length must match with the sectionsCount.");this._animationDelay=void 0!==e.animationDelay?e.animationDelay:u.NEEDLE_ANIMATION_DELAY,this._animationDuration=void 0!==e.animationDuration?e.animationDuration:u.NEEDLE_ANIMATION_DURATION,this._chartInset=void 0!==e.chartInset?e.chartInset:u.CHAR_INSET,this._barWidth=e.barWidth||u.BAR_WIDTH,this._easeType=e.easeType||u.EASE_TYPE,this._el=e.el,this._height=e.height,this._needleRadius=void 0!==e.needleRadius?e.needleRadius:u.NEEDLE_RADIUS,this._sectionsCount=e.sectionsCount,this._width=e.width,this._sectionsColors=e.sectionsColors,this._needleColor=e.needleColor,this.interval=e.interval||[0,1],this.percent=void 0!==e.percent?e.percent:0,this._initialize()}return s(t,[{key:"_initialize",value:function(){var r=this,s=1/this._sectionsCount/2,o=u.PAD_RAD,h=.75,l=Math.min(this._width,2*this._height)/2;this._chart=this._el.append("g").attr("transform","translate("+this._width/2+", "+this._height+")"),this._arcs=this._chart.selectAll(".arc").data((0,i.range)(1,this._sectionsCount+1)).enter().append("path").attr("class",function(e){return"arc chart-color"+e}).attr("d",function(e){var t=d(h),i=t+d(s);h+=s;var n=0===e?0:o/2,a=e===r._sectionsCount?0:o/2;return(0,c.arc)().outerRadius(l-r._chartInset).innerRadius(l-r._chartInset-r._barWidth).startAngle(t+n).endAngle(i-a)(r)}),this._sectionsColors&&this._arcs.style("fill",function(e){return r._sectionsColors[e-1]}),this._needle=new _({animationDelay:this._animationDelay,animationDuration:this._animationDuration,color:this._needleColor,easeType:this._easeType,el:this._chart,length:.5*this._height,percent:this._percent,radius:this._needleRadius}),this._update()}},{key:"_update",value:function(){var i=this;this._arcs&&(this._arcs.classed("active",function(e,t){return t===Math.floor(i._percent*i._sectionsCount)||t===i._arcs.size()-1&&1===i._percent}),this._chart.classed("min",0===this._percent),this._chart.classed("max",1===this._percent))}},{key:"interval",get:function(){return this._scale.domain()},set:function(e){if(!(e instanceof Array)||2!==e.length||isNaN(e[0])||isNaN(e[1])||e[0]>e[1])throw new Error("The interval specified is invalid.");this._scale=(0,n.scaleLinear)().domain(e).range([0,1]).clamp(!0)}},{key:"percent",get:function(){return this._percent},set:function(e){if(isNaN(e)||e<0||1<e)throw new RangeError("The percentage must be between 0 and 1.");this._needle&&this._needle.update(e),this._percent=e,this._update()}},{key:"value",set:function(e){if(isNaN(e))throw new Error("The specified value must be a number.");this.percent=this._scale(e)}}]),t}()});