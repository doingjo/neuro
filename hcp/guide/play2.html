<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="format-detection" content="telephone=no">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=medium-dpi, viewport-fit=cover" />
  <meta name="author" content="">
  <meta name="title" content="">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <link rel="stylesheet" href="../css/ini.min.css">
  <link rel="stylesheet" href="../css/swiper.min.css">
  <link rel="stylesheet" href="../css/fullcalendar.css">
  <link rel="stylesheet" href="../css/daterangepicker.css">
  <link rel="stylesheet" href="../css/NotoSansKR.css">
  <link rel="stylesheet" href="../css/Montserrat.css">
  <script type="text/javascript" src="../js/jquery.3.3.1.min.js"></script>
  <script type="text/javascript" src="../js/jquery-ui.js"></script>
  <script type="text/javascript" src="../js/jquery.ui.touch-punch.min.js"></script>
  <script type="text/javascript" src="../js/d3.v5.min.js"></script>
  <script type="text/javascript" src="../js/swiper.min.js"></script>
  <script type="text/javascript" src="../js/fullcalendar.js"></script>
  <script type="text/javascript" src="../js/moment.min.js"></script>
  <script type="text/javascript" src="../js/daterangepicker.js"></script>
  <script type="text/javascript" src="../js/Sortable.js"></script>
  <script type="text/javascript" src="../js/chart.js"></script>
  <script type="text/javascript" src="../js/ui.js"></script>
  <link rel="stylesheet" href="../css/contents.css">
  <title>HCP</title>
</head>
<body>
<style>
.wrap{padding:100px;}
.wrap button{margin:10px; border:1px solid #ddd;background-color:rgba(0,0,0,.2)}

.slider{position:relative; width:440px;height:4px; border-radius:2px;background-color:#333;}
.slider .ui-slider-handle{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%); width:16px;height:16px; border-radius:100%;background-color:#5280e2; cursor:move;}
.slider .ui-slider-range{height:100%; background-color:#5280e2;}

#box {
  width: 100px;
  height: 100px;
  background: greenyellow;
}
#box1 {
  width: 100px;
  height: 100px;
  background: red;
}
#box2 {
  width: 100px;
  height: 100px;
  background: greenyellow;
}
.scroll{height:100px;overflow-y:scroll;}
</style>

<!-- <div class="bar">
<div id="dragdiv"></div>
</div> -->
<div class="wrap">


<!--     <video id="video" width="420" controls>
        <source src="../data/vedio.mp4" type="video/mp4">
        Your browser does not support HTML video.
    </video> -->

    <div class="slider"></div>
    <p class="txt">00</p>


    <button class="btn-player play">재생</button>

 <div id="box1">
  </div>
  <div id="box2">
  </div>
<div class="scroll"></div>
</div>



<script>
// using setInterval
function type1(target){
  const animate = (cb, delay, duration) => {
    let count = 0;
    const intervalId = setInterval(() => {
      if (delay * count >= duration) return clearInterval(intervalId);
      cb();
      count++;
    }, delay);
  };

  const makeCb = (target, moveX) => () => {
    const transformStyle = target.style.transform;
    const translateX = transformStyle.replace(/[^\d.]/g, "");
    target.style.transform = `translateX(${+translateX + moveX}px)`;
  };

  animate(makeCb(target, 2), 1000/30, 3000);
}


// using rAF
function type2(target){
  const animate = (cb) => {
    requestAnimationFrame(cb);
  };

  const makeCb = (target, moveX, duration) => {
    let fpsInterval = 1000 / 30;
     let renderCount = 0;
     let rAF = '';
     let start;
     let then;

    return function cb(timestamp) {
        if (start === undefined && then === undefined) {
         start = window.performance.now();
         then = window.performance.now();
        }
        const totalElapsed = window.performance.now() - start;
       if (totalElapsed > duration) {
         return;
       }

       const elapsed = timestamp - then;
        if (elapsed >= fpsInterval) {
         // draw
         then = timestamp - (elapsed % fpsInterval);
         renderCount++;

         const transformStyle = target.style.transform;
         const translateX = transformStyle.replace(/[^\d.]/g, "");
         target.style.transform = `translateX(${+translateX + moveX}px)`;



         $('.scroll').append("<p>totalElapsed : "+totalElapsed+"</p>")
         $('.scroll').append("<p>renderCount : "+renderCount+"</p>")

       }
       rAF = requestAnimationFrame(cb);
    };
  };

  animate(makeCb(target, 2, 3000));
}

$('.btn-player').on('click', function(){
  var box1 = document.getElementById("box1")
  var box2 = document.getElementById("box2")
  type1(box1);
  type2(box2);
});
</script>

</body>
</html>
