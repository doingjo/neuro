<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="format-detection" content="telephone=no">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=medium-dpi, viewport-fit=cover" />

  <meta name="author" content="">
  <meta name="title" content="">
  <meta name="keywords" content="">
  <meta name="description" content="">

  <link rel="stylesheet" href="../css/ini.min.css">
  <link rel="stylesheet" href="../css/swiper.min.css">
  <link rel="stylesheet" href="../css/fullcalendar-selecter.css">
  <!-- 임시로 일단 넣어둔거 실제로 캘린더 넣으면 교체 해야함 -->
  <!-- <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" /> -->
  <script type="text/javascript" src="../js/jquery.3.3.1.min.js"></script>
  <script type="text/javascript" src="../js/webfont-NotoSansKR.js"></script>
  <script type="text/javascript" src="../js/webfont-Montserrat.js"></script>
  <script type="text/javascript" src="../js/d3.v5.min.js"></script>
  <script type="text/javascript" src="../js/swiper.min.js"></script>
  <script type="text/javascript" src="../js/fullcalendar.js"></script>
  <script type="text/javascript" src="../js/chart.js"></script>
  <script type="text/javascript" src="../js/ui.js"></script>
  <noscript>
      <link rel="stylesheet" href="../css/NotoSansKR.css">
      <link rel="stylesheet" href="../css/Montserrat.css">
  </noscript>
  <link rel="stylesheet" href="../css/contents.css">

  <title>HCP</title>
</head>
<style>
  #calendar{width:404px;}
</style>

<body>
  <div id="wrap">
    <div id='calendar'></div>
  </div>

<script>

  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
 var $targetOld = null;
    var calendar = new FullCalendar.Calendar(calendarEl, {
      headerToolbar: {
        left: 'prev',
        center: 'title',
        right: 'next'
        //right: 'dayGridMonth,timeGridWeek'
      },
      fixedWeekCount: false,
      //initialDate: '2020-09-12',
      //locale : 'ko',
      views: {
        dayGridMonth: {
            titleFormat : function(date) {
              var month = '0'+(date.date.month +1);
              return date.date.year +". "+month.slice(-2);
            },
            dayHeaderContent: ({date}) => {
                var weekdays = ['일','월','화','수','목','금','토']
                return weekdays[date.getDay()]
            },
        },
        timeGridWeek: {
            titleFormat : function(date) {
              var startM = '0'+(date.date.month +1),
                  startD = (date.date.day),
                  endM = '0'+(date.end.month +1),
                  endD = (date.end.day);
              return startM.slice(-2)+'.'+startD+' ~ '+endM.slice(-2)+'.'+endD
            },
            dayHeaderContent: ({date}) => {
                var weekdays = ['일','월','화','수','목','금','토']
                return {html: `<div class="col-header">${weekdays[date.getDay()]}</div><div class="col-day col-day`+date.getDate()+`">${date.getDate()}</div>`}
            },
        }
      },
      height: 'auto',
      selectable: true,
      unselectAuto: false,
      // selectMirror: true,
      select: function(date) {
        var $leagth = $('.fc-highlight').length-1;
        $('.fc-daygrid-day-number').attr('style','');
        $('.fc-highlight').eq(0).addClass('startSelect');
        $('.fc-highlight').eq($leagth).addClass('endSelect');

        var timestamp = new Date(date.end.setSeconds(date.end.getSeconds()-1)),
            endY = timestamp.getFullYear(),
            endM = ('0'+(parseInt(timestamp.getMonth())+1)).slice(-2),
            endD = timestamp.getDate(),
            endSam = endY+'-'+endM+'-'+endD;
        $('[data-date="'+date.startStr+'"], [data-date="'+endSam+'"]').find('.fc-daygrid-day-number').css('color','#fff');

        console.log(date.startStr+'~'+endSam);
      },
      longPressDelay: 1,
      selectLongPressDelay: 1,
    });
    calendar.render();
  });



</script>

</body>
</html>